<span>Tutti i campi contrassegnati con * sono obbligatori</span>
<div class="ml-3">
  <form #aggiungiUtenteForm="ngForm">
    <div class="row mt-4 mb-0">
      <div class="col-md-4 pb-2">
        <div class="row">
          <div class="col">
            <label for="inputUserId" class="title required">Codice fiscale</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p-autoComplete id="inputUserId" class="input-text pt-0" name="codiceFiscale" aria-describedby="inputUserIdHelpDescription"
                            pattern="^[A-Za-z]{6}[0-9]{2}[A-Za-z]{1}[0-9]{2}[A-Za-z]{1}[0-9]{3}[A-Za-z]{1}$" required
                            #codicefiscaleinput = "ngModel" [(ngModel)]="datiUtente.codiceFiscale"
                            [suggestions]="listaCodiciFiscali" (completeMethod)="loadSuggestions($event)" (onClear)="clearAutocompleteCodiceFiscale()"
                            (ngModelChange)="modificaModel('codiceFiscale', datiUtente.codiceFiscale)"
                            [minLength]="minCharsToRetrieveCF" maxlength="16" emptyMessage="Nessun risultato trovato"
                            delay="0" autoHighlight="true">
            </p-autoComplete>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p *ngIf="!codiceFiscaleExists" [ngClass]="{'text-muted': !isCampoInvalido(codicefiscaleinput), 'text-invalid': isCampoInvalido(codicefiscaleinput)}">
              {{setPlaceholder(codicefiscaleinput, 'string')}}
            </p>
            <p *ngIf="codiceFiscaleExists" class="text-invalid">Attenzione! L'utente è già presente</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 pb-2">
        <div class="row">
          <div class="col">
            <label for="nomeUtente" class="title">Nome</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <input type="text" id="nomeUtente" name="nome" #nomeUtenteInput="ngModel"
                   [(ngModel)]="datiUtente.nome" (ngModelChange)="modificaModel('nome', datiUtente.nome)"
                   class="input-text pt-0" autocomplete="off">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(nomeUtenteInput), 'text-invalid': isCampoInvalido(nomeUtenteInput)}">
              {{setPlaceholder(nomeUtenteInput, 'string')}}
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row">
          <div class="col">
            <label for="cognomeUtente" class="title">Cognome</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <input type="text" id="cognomeUtente" name="cognome" #cognomeUtenteInput="ngModel"
                   [(ngModel)]="datiUtente.cognome" (ngModelChange)="modificaModel('cognome', datiUtente.cognome)"
                   class="input-text pt-0" autocomplete="off">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(cognomeUtenteInput), 'text-invalid': isCampoInvalido(cognomeUtenteInput)}">
              {{setPlaceholder(cognomeUtenteInput, 'string')}}
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4 mb-0">
      <div class="col-md-4 pb-2">
        <div class="row">
          <div class="col">
            <label for="emailUtente" class="title">E-mail</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <input type="email" id="emailUtente" name="email" #emailUtenteInput="ngModel"
                   pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                   [(ngModel)]="datiUtente.email" (ngModelChange)="modificaModel('email', datiUtente.email)"
                   class="input-text pt-0" autocomplete="off">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(emailUtenteInput), 'text-invalid': isCampoInvalido(emailUtenteInput)}">
              {{setPlaceholder(emailUtenteInput, 'email')}}
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4 pb-2">
        <div class="row">
          <div class="col">
            <label for="telefonoUtente" class="title">Telefono</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <input type="text" id="telefonoUtente" name="telefono" #telefonoUtenteInput="ngModel"
                   [(ngModel)]="datiUtente.telefono" (ngModelChange)="modificaModel('telefono', datiUtente.telefono)"
                   class="input-text pt-0" autocomplete="off">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(telefonoUtenteInput), 'text-invalid': isCampoInvalido(telefonoUtenteInput)}">
              {{setPlaceholder(telefonoUtenteInput, 'string')}}
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-2 pb-2">
        <div class="row">
          <div class="col">
            <label for="attivazione" class="title">Attivazione</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <svg class="bg-light icon img-calendar" (click)="openDatepicker(datePickerAttivazione)">
              <use xlink:href="assets/img/sprite.svg#it-calendar"></use>
            </svg>
            <dp-date-picker
              mode="day"
              id="attivazione"
              theme="dp-material"
              [config]="{
                locale: 'it',
                format: 'DD/MM/YYYY',
                firstDayOfWeek: 'mo',
                showGoToCurrent: false,
                openOnClick: isCalendarOpen,
                openOnFocus: false,
                min: minDateDDMMYYYY,
                max: setMaxDate(datePickerScadenza),
                returnedValueType: tipoData
              }"
              #attivazioneInput = "ngModel"
              [(ngModel)]="datiUtente.attivazione"
              name="attivazione"
              #datePickerAttivazione
              (click)="isCalendarOpen = false"
              (onSelect)="modificaModel('attivazione', datiUtente.attivazione)"
            ></dp-date-picker>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(attivazioneInput), 'text-invalid': isCampoInvalido(attivazioneInput)}">
              {{setPlaceholder(attivazioneInput, 'date')}}
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-2 pb-2">
        <div class="row">
          <div class="col">
            <label for="scadenza" class="title">Scadenza</label>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <svg class="bg-light icon img-calendar" (click)="openDatepicker(datePickerScadenza)">
              <use xlink:href="assets/img/sprite.svg#it-calendar"></use>
            </svg>
            <dp-date-picker
              mode="day"
              id="scadenza"
              theme="dp-material"
              [config]="{
                locale: 'it',
                format: 'DD/MM/YYYY',
                firstDayOfWeek: 'mo',
                showGoToCurrent: false,
                openOnClick: isCalendarOpen,
                openOnFocus: false,
                min: setMinDate(datePickerAttivazione),
                returnedValueType: tipoData
              }"
              #scadenzaInput = "ngModel"
              [(ngModel)]="datiUtente.scadenza"
              name="scadenza"
              #datePickerScadenza
              (click)="isCalendarOpen = false"
              (onSelect)="modificaModel('scadenza', datiUtente.scadenza)"
            ></dp-date-picker>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p [ngClass]="{'text-muted': !isCampoInvalido(scadenzaInput), 'text-invalid': isCampoInvalido(scadenzaInput)}">
              {{setPlaceholder(scadenzaInput, 'date')}}
            </p>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

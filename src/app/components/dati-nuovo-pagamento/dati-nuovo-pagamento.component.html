<hr/>

<div class="row">
  <div class="col-1">
    <p class="title page-subtitle">Dati</p>
  </div>
  <div class="offset-10 col-1">
    <svg class="bg-light icon"
         data-toggle="collapse" data-target="#sezioneDati"
         aria-expanded="true" aria-controls="sezioneDati"
         (click)="aggiornaVisibilita()">
      <use [attr.xlink:href]="isVisibile ? 'assets/img/sprite.svg#it-collapse' : 'assets/img/sprite.svg#it-expand'" xlink:href=""></use>
    </svg>
  </div>
</div>

<div id="sezioneDati" class="collapse show">
  <div class="page-section">
    <div class="row">
      <div *ngFor="let campo of listaCampi" [ngClass]="calcolaDimensioneCampo(campo)">
        <div [ngSwitch]="campo.tipoCampo" class="form-elem-container">

          <div *ngSwitchCase="'string'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <input
                [id]="campo['nome']"
                [placeholder]="campo['informazioni']"
                [(ngModel)]="valoriCampi[campo['nome']]"
                type="text"
                [maxLength]="campo.lunghezza"
                [disabled]="campo.disabilitato"
              />
            </div>
          </div>

          <div *ngSwitchCase="'number'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <input
                [id]="campo['nome']"
                [placeholder]="campo['informazioni']"
                [(ngModel)]="valoriCampi[campo['nome']]"
                type="number"
                [maxLength]="campo.lunghezza"
                [disabled]="campo.disabilitato"
              />
            </div>
          </div>

          <div *ngSwitchCase="'importo'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <input
                [id]="campo['nome']"
                class="price-input"
                [placeholder]="campo['informazioni']"
                [(ngModel)]="valoriCampi[campo['nome']]"
                type="number"
                [maxLength]="campo.lunghezza"
                [disabled]="campo.disabilitato"
              />
            </div>
          </div>

          <div *ngSwitchCase="'date'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']+'-giorno'" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <div class="col-3 form-elem-date-col">
                <input
                  [id]="campo['nome']+'-giorno'"
                  [(ngModel)]="valoriCampi[campo['nome']]['giorno']"
                  type="number"
                  min="1"
                  [max]="calcolaMaxGiorni(campo['nome']['mese'], campo['nome']['anno'])"
                  [disabled]="campo.disabilitato"
                />
                <span class="form-elem-date-separator">/</span>
              </div>
              <div class="col-6 form-elem-date-col">
                <select
                  class="form-elem-date-select"
                  [disabled]="campo.disabilitato"
                >
                  <option [value]="null"></option>
                  <option *ngFor="let item of mesi">{{item.label}}</option>
                </select>
                <span class="form-elem-date-separator">/</span>
              </div>
              <div class="col-3 form-elem-date-col">
                <input
                  [id]="campo['nome']+'-anno'"
                  [(ngModel)]="valoriCampi[campo['nome']]['anno']"
                  type="number"
                  min="1900"
                  [max]="calcolaMaxAnno()"
                  [disabled]="campo.disabilitato"
                />
              </div>
            </div>
          </div>

          <div *ngSwitchCase="'datemmyy'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']+'-mese'" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <div class="col-8 form-elem-date-col">
                <select
                  class="form-elem-date-select"
                  [disabled]="campo.disabilitato"
                >
                  <option [value]="null"></option>
                  <option *ngFor="let item of mesi">{{item.label}}</option>
                </select>
                <span class="form-elem-date-separator">/</span>
              </div>
              <div class="col-4 form-elem-date-col">
                <input
                  [id]="campo['nome']+'-anno'"
                  [(ngModel)]="valoriCampi[campo['nome']]['anno']"
                  type="number"
                  min="1900"
                  [max]="calcolaMaxAnno()"
                  [disabled]="campo.disabilitato"
                />
              </div>
            </div>
          </div>

          <div *ngSwitchCase="'dateyy'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <input
                [id]="campo['nome']"
                [(ngModel)]="valoriCampi[campo['nome']]"
                type="number"
                min="1900"
                [max]="calcolaMaxAnno()"
                [disabled]="campo.disabilitato"
              />
            </div>
          </div>

          <div *ngSwitchCase="'select'" class="dynamic-form-elem">
            <div class="row">
              <label [htmlFor]="campo['nome']" class="title">{{campo.titolo}}</label>
            </div>
            <div class="row">
              <select
                [ngClass]="{'placeholder': valoriCampi[campo['nome']] === null}"
                [id]="campo['nome']"
                [(ngModel)]="valoriCampi[campo['nome']]"
                [disabled]="campo.disabilitato"
              >
                <option [value]="null" class="placeholder">{{campo.informazioni}}</option>
                <option *ngFor="let item of campo['opzioni']" [value]="item.value">{{item.label}}</option>
              </select>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
